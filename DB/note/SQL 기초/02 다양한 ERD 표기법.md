# 다양한 ERD 표기법

---

# 다양한 ERD 표기법

## 데이터베이스 설계 (DB Design)

### 개념적 설계

사람이 이해하기 쉽게, 데이터의 관계를 개념적으로 시각화

그래픽 도구를 사용해서 설계자가 디자인한다. 다른 사람이 봐도 이해할 수 있도록.

그 결과물이 바로 ERD이다.

- Entity-Relationship Diagram
- 완전히 개념적인 ERD. 기술적으로 사용하지는 않음

### 논리적 설계

컴퓨터에 저장하기 위해 데이터의 논리적 구조를 표현한 것.

**관계 데이터 모델**의 경우, 데이터의 구조가 **릴레이션**으로 이루어져 있는 것.

**데이터베이스 스키마**는, 관계 데이터 모델에 기반하여 데이터의 관계를 ERD로 표현한 것.

- 그 산출물이 **논리적 ERD**이다.
- MySQL 워크벤치에서 만들어내는 ERD가 바로 논리적 ERD (IE 표기법)

---

# ERD 이해

## ERD의 내용

테이블의 구조

- 테이블에 어떤 attribute가 있고, 어떤 게 PK 혹은 FK 인지

테이블 간의 관계

- PK, FK 컬럼을 통해 간접적으로 표현됨

## 관계의 특성 (인스턴스 레벨)

### 매핑 정보

일대일, 일대다, 다대다

### 참여 정보

부분 참여, 전체 참여

## 관계의 시각화: Crow’s Foot Notation

매핑 정보와 참여 정보를 어떻게 시각화할 것인가에 대한 하나의 방법

- 매핑 정보에서 bar는 일, crow’s foot은 다
- 참여 정보에서 empty circle은 부분 참여, bar는 전체 참여
  - 참여 정보 보는 방향에 주의
  - NULL값 허용 여부라고 생각해도 비슷하다.

시스템 요구사항에 맞춰, 매핑과 참여 정보를 잘 조합하는 것이 설계자의 역량이다.

### 다대다 매핑의 경우

RDB에서는 FK에서 set value를 허용하고 있지 않기 때문에, 다대다 매핑 관계를 두 개의 일대일 매핑 관계로 분리하여 표현한다.

그 과정에서 **중간 테이블**이 생성된다. (intermediary table)

## 관계의 종류

### 비식별 관계

부모 테이블의 PK를 자식 테이블의 FK로 추가한 상태.

부모의 키 값을 추가로 넣지 않고도 자식의 튜플을 유일하게 식별할 수 있다.

**점선**으로 표현

### 식별 관계

부모 테이블의 PK가 자식 테이블의 **PK이자 FK**로 추가된 상태

부모의 키 값이 추가로 들어와야만 자식의 튜플을 유일하게 식별할 수 있는 경우.

**실선**으로 표현

- 이 경우 자식 테이블의 특정 튜플은, 부모 테이블의 특정 튜플에 **존재 자체가 종속된다.**
- 부모 테이블의 특정 튜플이 삭제되면, 그와 연결된 자식 테이블의 튜플이 존속할 수 없다.

intermediary table이 전형적인 식별 관계를 구성하고 있다.

- 애초에 두 테이블 간 다대다 관계를 형성하기 위해 인위적으로 구성한 튜플들은 담고 있는 테이블.
- 원본 데이터가 삭제된다면, 그에 연결된 튜플은 사라지는 게 정상

---

# ERD 표기법

IE 표기법과 IDEF1X 표기법

거의 다 똑같다고 봐도 되는데,

SQL 상 다른 점이 없는 **부모의 참여정보**를 IDEF1X에서 표기하지 않는다는 차이점이 존재.
