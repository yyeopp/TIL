# Chapter 2: 네트워크

---

# Section 4: IP 주소

---

## ARP(Address Resolution Protocol)

컴퓨터 간의 통신은, IP주소에서 **ARP**를 통해 MAC 주소를 찾아 **MAC 주소를 기반으로** 이루어진다.

즉, ARP는 IP 주소로부터 MAC 주소를 구하는, 다리 역할을 하는 **프로토콜**이다.

- **논리적 주소**인 IP 주소를 **물리적 주소**인 MAC 주소로 변환한다.

- 반대로 **RARP**는 MAC 주소를 IP 주소로 변환해줄 수 있다.

### 과정

특정 IP 주소로 연결을 원하는 장치는 **ARP Request 브로드캐스트**를 보낸다.

- **브로드캐스트**는 송신 호스트가 전송한 데이터가 **네트워크에 연결된 모든 호스트에 전송되는** 것이다. 

브로드캐스트를 받은 장치들 중 일치하는 IP 주소를 가지는 장치가, 자신의 **MAC 주소**를 담은 **ARP reply 유니캐스트**를 반환한다.

- **유니캐스트**는 고유 주소로 식별된 **하나의 네트워크 목적지에** 1:1로 데이터를 전송하는 것이다.

이를 통해 IP 주소로부터 MAC 주소를 식별해 두 장치 간 네트워크 통신이 개시된다.

---

## 홉바이홉 통신(hop by hop)

IP 주소를 통해 통신하는 과정을 홉바이홉 통신이라고도 한다.

이는 통신망에서 각 패킷이 **여러 개의 라우터를 건너가는 모습**을 비유한 것으로, 각각의 라우터는 **라우팅 테이블의 IP**를 기반으로 패킷을 전달해나간다.

- 즉, 각 통신 장치에 있는 **라우팅 테이블**의 IP를 통해 시작 주소부터 다음 IP로 계속해서 이동하는 **라우팅** 과정을 거쳐 패킷이 최종 목적지까지 도달하는 통신을 홉바이홉이라고 한다.

### 라우팅 테이블

송신지에서 수신지까지 도달하기 위해 사용되며, 라우터에 들어가 있는 **목적지 정보**들과 그 목적지로 **가기 위한 방법**이 들어 있는 리스트를 뜻한다.

테이블에는 **게이트웨이**와 모든 목적지에 대해 그에 도달하기 위해 거쳐야 할 **다음 라우터의 정보**가 들어 있다.

### 게이트웨이(gateway)

서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는, **관문** 역할을 할 **컴퓨터, 소프트웨어를 두루 일컫는** 용어다.

사용자가 인터넷에 접속하기 위해서는, 수많은 게이트웨이를 거쳐야 한다.

게이트웨이는 서로 다른 네트워크 상의 **통신 프로토콜을 변환**해주는 역할을 하기도 한다.

- 게이트웨이는 라우팅 테이블에서 볼 수 있고, 라우팅 테이블은 `netstat -r` 명령어로 확인이 가능하다.

---

## IP 주소 체계

### 종류

IPv4와 IPv6으로 나뉜다.

- IPv4는 **32비트**를 **8비트 단위로** 점을 찍어 표기한다.
  
  - 123.45.67.89 같이 생긴 것이 IPv4 주소다.

- IPv6는 **64비트**를 **16비트 단위로** 점을 찍어 표기한다.
  
  - 2001:db8::ff00:42:8329 같이 생긴 것이 IPv6 주소다.

- IPv6로 이행하는 것이 추세이지만, 현재 가장 많이 쓰이는 주소 체계는 IPv4이다.
  
  - 이후 내용도 IPv4가 기준이 될 것.

### 클래스 기반 할당 방식


