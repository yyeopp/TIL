# 제 3부 실행 환경 구축편

---

# Chapter 07: 여러 컨테이너의 운용 관리

---

Docker를 제품 환경에서 운용할 때는 보통 어플리케이션 서버, 로그 서버, 프록시 서버 등 **여러 개의 컨테이너들을 연계하여** 작동시킨다.

---

## 여러 컨테이너 관리의 개요

### 웹 3계층 시스템 아키텍처

어플리케이션 가동을 위해, 여러 서버에 기능과 역할을 분할하여 인프라 전체를 구성하는 것을 **인프라 아키텍처**라고 한다.

**웹 3계층 아키텍처**는 웹 어플리케이션의 대표적인 인프라 아키텍처로, 웹 시스템의 서버들을 역할별로 3개로 나누는 설계 사상이다.

#### 프론트 서버

클라이언트의 웹 브라우저가 보낸 HTTP 요청을 받아, HTTP 응답을 반환하는 서버 기능을 가진다.

- 웹 프론트 서버, 웹 서버라고 말한다.

미들웨어로 구축하는 경우도 있고, 오픈소스로는 **Nginx**, MS의 IIS 등이 있다.

**요청 처리**가 메인 업무이므로, **부하분산**을 적절히 대비하여야 한다.

- 스케일러블하게 처리 대수를 산정하고, 

- **로드밸런서** 같은 기기를 사용하게 된다.

#### 어플리케이션 서버

**업무 처리**를 실행하는 서버이다.

결제나 수주 처리 등, 어플리케이션의 처리를 실행하는 **프로그램의 실행 환경**이 된다.

프론트 서버와 마찬가지로 미들웨어로 구축하는 경우가 있다.

#### 데이터베이스 서버

**영구 데이터를 관리**하기 위한 서버다.

어플리케이션 처리 실행에서 발생하는 **영구 데이터**는, **RDBMS** 기능을 가진 미들웨어에서 관리되는 편이다.

- 오픈소스인 MySQL이나 PostgreSQL, Oracle의 Oracle DB 등이 있다.

**NoSQL**의 경우, RDMBS와는 다른 새로운 방식을 총칭한다.

- **병렬분산처리**나 **유연한 스키마 설정** 등이 특징이고,

- 주요 방식으로는 **KVS**나 **도큐먼트 지향 데이터베이스** 등이 있다.

- **대량의 데이터 축적**이나 **병렬처리**를 특기로 하기 때문에, **많은 사용자의 엑세스를 처리**하는 온라인 시스템에서 널리 이용된다.

- 오픈소스인 Redis나 MongoDB 등이 있다.

영구 데이터에 대해서는 높은 가용성이 요구되어, **클러스터링** 같은 기술로 **다중화**하는 경우가 많다.

만일의 장애에 대비해, **데이터 백업**이나 **원격지 보관** 등의 대책을 강구해 둘 필요도 있다.

DB 조작은 부하가 상당하기 때문에, 운용 상황에 따라 OS나 미들웨어의  설정 변경 등 **퍼포먼스 튜닝**이 요구된다.

### 영구 데이터의 관리

시스템 운용 중 생성되고 축적되는 데이터 중 프로그램 종료 후에도 스토리지에 저장되는 것을 영구 데이터라고 한다.

- 영구 데이터는 기본적으로 **시스템 가동 시간**에 따라 증감 및 변화하는 특징이 있다.

스토리지 저장 영역에도 한계가 있고, 스토리지 자체가 고장날 위험도 있기 때문에 영구 데이터에 대한 적절한 관리가 필요하다.

#### 데이터의 백업 및 복원


