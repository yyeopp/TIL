# Chapter 07: 응용 계층 - 어플리케이션에 데이터 전송하기

---

## 응용 계층의 역할

> OSI 모델의 응용 계층의 역할에 대하여

### 응용 계층의 역할

웹 페이지를 조회하는 웹 브라우저나, 메일을 송수신하는 메일 프로그램은 사용자가 하고 싶은 일을 할 수 있도록 도와주는 **어플리케이션**이다.

어플리케이션은 **서비스를 요청하는 측**(**사용자 측**) 어플리케이션과 **서비스를 제공하는 측** 어플리케이션으로 분류할 수 있다.

- 일반적으로, 서비스를 요청하는 측을 **클라이언트**, 서비스를 제공하는 측을 **서버**라고 한다.

이러한 어플리케이션은 **응용 계층**에서 동작하고 있다.

- 편의상 OSI 모델에서 세션 계층과 표현 계층을 응용 계층에 포함하는 것으로 생각한다.

응용 계층에서는, 클라이언트의 요청을 전달하기 위해 **통신 대상인 서버가 이해할 수 있는 메시지로 변환하고 전송 계층을 전달**하는 역할을 한다.

다른 계층과 마찬가지로, 클라이언트 측에서 서버 측이 이해할 수 있는 메시지(데이터)로 변환하려면 응용 계층의 **프로토콜**을 사용해야 한다.

- 웹 사이트를 볼 때는 **HTTP**, 파일을 전송할 때는 **FTP**, 메일을 보낼 때는 **SMTP**, 메일을 받을 때는 **POP3**라는 프로토콜이 적용된다. 네트워크에서 **도메인**을 기반으로 **IP 주소**를 알아내는 것을 **이름 해석**(**name resolution**)이라 하는데, 이를 위해서는 **DNS**를 사용한다.

- 위 5개가 대표적이고, 그 외에도 수많은 프로토콜들이 있다.

---

## 웹 서버의 구조 (웹 사이트 접속)

> 응용 계층에서 웹 페이지에 접속하기 위한 프로토콜이 있다. 웹 페이지에 접속하는 구조에 대하여

### WWW란?

**WWW**는 줄여서 **W3**이나 **웹**(Web)이라고 부른다.

WWW에서는 **HTML**, **URL**, **HTTP**라는 세 가지 기술이 사용된다.

**HTML**은, 웹 페이지에서 문장 구조나 문자를 꾸미는 **태그**를 사용해 작성하는 **마크업 언어**이다.

- 제목, 목록 같은 문장 구조나 이미지 파일을 보이기 위해 패그를 사용한다.

- **마크업 언어**는 문장의 일부를 태그로 감싸고 문장을 꾸미기 위한 형식.

- HTML은 **하이퍼텍스트**로 작성하는 마크업 언어라고 할 수 있다. 즉, 문자와 이미지를 표시하거나 **하이퍼링크**를 사용할 수 있다.

- 클라이언트에서 **html 파일**을 먼저 전송받고, 해당 파일에 연결된 이미지 파일 등을 그 다음으로 전송받아 웹 페이지를 구성하게 된다.

### HTTP란?

클라이언트는 웹 사이트를 보기 위해, **서버의 80번 포트**를 사용하여 **HTTP 통신**을 한다.

기본적으로 클라이언트에서 **HTTP request**를 보내고, 서버에서 **HTTP response**를 반환하는 구조로 이루어진다.

**HTTP/1.0 이전**에는, 클라이언트에서 요청을 보낼 때마다 연결을 새로 수립하고 다시 끊는 과정을 반복했다.

- 연결 수립, 요청, 응답, 연결 끊기의 4단계를 꾸준히 반복하는 방식.

**HTTP/1.1** 버전부터는, **keepalive**라는 기능이 추가되었다.

- 이는 연결을 한 번 수립하면 **데이터 교환을 마칠 때까지 유지**하고, 데이터 교환을 모두 끝내야 연결을 끊는 구조이다.

- keepalive에서도 **요청은 순서대로 처리**하게 된다.

- 매번 연결 수립과 끊기가 반복되지 않아 성능이 개선될 수 있었다.

**HTTP/2** 버전에서는 1.1 버전의 단점을 보완하여 보다 빠르게 컨텐츠를 표시할 수 있게 되었다.

- 1.1 버전은 항상 **요청을 보낸 순서대로** 응답을 반환하는데, 이는 **병목 현상**을 쉽게 발생시킬 수 있다.

- 해당 버전부터는 요청을 보낸 순서에 무관하게 **처리가 완료되는 대로** 응답을 반환해준다.

---

## DNS 서버의 구조 (이름 해석)

> 응용 계층에서는 이름 해석을 통해 도메인 이름을 IP 주소로 반환하는 DNS가 있다. DNS의 구조에 대하여

### 도메인 이름이란?

기본적으로 서버는 IP 주소를 가지고 있어서 인터넷을 통해 접속할 수 있는데, 웹 브라우저 주소 창에 **URL**을 입력하는 것만으로도 웹 서버 접속이 가능하다.

**DNS**는, **URL을 IP 주소로 변환하는 서비스**이다. 일반적으로 IP 주소를 기억하기 힘들기 때문.

도메인 이름을 IP 주소로 자동 변환하여 접속이 가능하게 돕는 것을, DNS의 **이름 해석**(name resolution)이라고 한다.

- 도메인 이름 앞에 붙는 **www**는 **호스트 이름**(서버 이름)이다.

요청한 DNS 서버가 해당 도메인의 IP 주소를 모르는 경우도 있는데, 그러면 알아서 다른 DNS 서버로 요청을 토스한다.

- DNS 서버는 전 세계에 배치되어 있고, **계층적으로** 연결되어 있다.

- 덕분에 도메인 이름만으로도 전 세계 네트워크에 접속할 수 있다.

---

## 메일 서버의 구조 (SMTP와 POP3)

> 응용 계층에서 메일을 송수신하기 위한 프로토콜인 SMTP와 POP3. 메일을 송수신하는 구조에 대하여

### 메일의 송수신 구조

메일 송수신을 위해 사용되는 **프로토콜**에는 두 종류가 있다.

- 클라이언트에서 보내는 데 사용되는 **SMTP**, 클라이언트에서 받는 데 사용되는 **POP3**.

- 각각 포트 번호로 25번, 110번을 사용하고 있다.

- SMTP는 **메일 서버 간의 메일 전송**에도 사용된다.

### SMTP에 의한 메일 송신과 메일 전송

SMTP로 클라이언트가 메일 서버로 메일을 송신할 때, 여러 정보들을 순서대로 보내게 된다.

- 세션 시작 통지, 송신자 메일 주소 통지, 목적지 메일 주소 통지, 메일 본문 전송 통지, 메일 본문 송신, 세션 종료 통지

서버 간의 메일 전송에도 SMTP가 사용되고, 같은 과정이 반복된다.

### POP3에 의한 메일 수신

메일 서버는 **메일 박스**라고 하는 메일 보관 기능이 있다.

POP3는, 메일 서버의 메일 박스에서 메일을 가져와 클라이언트에게 전송하는 기능을 수행한다.

- 110번 포트를 사용하고, 클라이언트는 **사용자 인증**을 거쳐 메일을 수신할 수 있다.

POP3에 의한 메일 수신은 다음의 순서로 이루어진다.

- 세션 시작, 클라이언트의 사용자 이름 및 비밀번호 통지, 클라이언트의 메일 확인, 서버로부터의 메일 전송, 세션 종료

> ### ping 명령
> 
> 목적지 컴퓨터와의 통신을 확인하기 위해 사용하는 명령이다.
> 
> **ICMP**라는 프로토콜을 사용하여, 목적지 컴퓨터에 ICMP 패킷을 전송하고 그에 대한 응답이 제대로 오는지 확인할 수 있다.
> 
> ping 명령이 정상으로 실행되는지 여부로 네트워크 연결이 정상인지 여부를 판단할 수 있다.
