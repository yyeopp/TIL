# Chapter 02: 네트워크의 기본 규칙

---

## 네트워크의 규칙

### 프로토콜이란?

네트워크를 이용해 통신하려면, 일정한 **규칙**을 지켜야 한다. 이를 **프로토콜**(protocol)이라 한다.

- 이를 통해 서로 다른 기기가 *서로 이해할 수 있는* 메시지를 주고받을 수 있다.

- 프로토콜은 여러 절차들을 담고 있는데, 각 절차는 **서로 영향을 주지 않는다는 특징**이 있다.
  
  - 편지를 보내는 과정을 예시로 들 때, 편지를 쓰는 규칙, 편지를 보내는 규칙, 우체국의 규칙은 서로 독립적이다.
  
  - 그 모든 규칙이 잘 지켜질 때 편지를 성공적으로 보낼 수 있다.

---

## OSI 모델과 TCP/IP 모델

> 네트워크에서 데이터를 주고받기 위한 통신 규격

### OSI 모델이란?

전 세계의 컴퓨터들 간 통신이 가능하기 위해 필요한 모든 사항을 담은 **표준 규격**이 필요했다.

> #### 규격
> 
> 기술적인 사항에 대해 제정한 기준. 기술적 표준

- 해당 표준을, ISO 국제표준화기구에서 OSI 모델이라는 이름으로 제정했다.

OSI 모델은 **네트워크 기술의 기본**이 되는 모델이다.

- **데이터 송수신**에 있어서 컴퓨터 내부에서 일어나는 일을 **일곱 개의 계층으로 나눠서** 분류한 것에 해당한다.

- 통신할 때, 데이터는 맨 위의 응용 계층(7계층)에서 순차적으로 아래 계층으로 전달된다.

각 계층을 확인하면,

- 7계층, **응용 계층**(Application Layer, 어플리케이션 계층)
  
  - 이메일 & 파일 전송, 웹 사이트 조회 등 어플리케이션에 대한 서비스를 제공

- 6계층, **표현 계층**(Presentation Layer, 프레젠테이션 계층)
  
  - 문자 코드, 압축, 암호화 등 데이터의 변환

- 5계층, **세션 계층**(Session Layer)
  
  - 세션 체결, 통신 방식을 결정

- 4계층, **전송 계층**(Transport Layer, 트랜스포트 계층)
  
  - 신뢰할 수 있는 통신을 구현

- 3계층, **네트워크 계층**(Network Layer)
  
  - 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소 결정

- 2계층, **데이터 링크 계층**(Data Link Layer)
  
  - 네트워크 기기 간 데이터 전송 및 물리 주소 결정

- 1계층, **물리 계층**(Physical Layer)
  
  - 시스템 간 물리적인 연결과 전기 신호 변환 및 제어

수신 측에도 마찬가지로 7계층이 존재한다.

즉, 송신 측이 상위 계층에서 하위 계층으로 데이터를 전달하여 네트워크로 전송하면, 수신 측이 이를 받아 하위 계층에서 상위 계층으로 전달함으로써 데이터를 받게 된다.

- **각 계층은 독립적**으로, 데이터가 전달되는 동안 다른 계층의 영향을 받지 않는다.

### TCP/IP 모델이란?

OSI 모델의 7계층을 **4계층**으로 정리한 것으로 보면 된다.

- 4계층, **응용 계층**
  
  - OSI 모델의 7~5, 응용, 표현, 세션 계층을 합친 것이다.

- 3계층, **전송 계층**
  
  - OSI 모델의 4, 전송 계층과 같다.

- 2계층, **인터넷 계층**
  
  - OSI 모델의 3, 네트워크 계층과 같다.

- 1계층, **네트워크 접속 계층**
  
  - OSI 모델의 2~1, 데이터 링크, 물리 계층을 합친 것이다.

이러한 계층들에도, 제각각 다양한 **프로토콜**을 담고 있다는 점을 인지해야 한다.

---

## 캡슐화와 역캡슐화

> 데이터를 송수신할 때 일어나는 캡슐화와 역캡슐화는 어떻게 이루어지는지

### 캡슐화와 역캡슐화란?

컴퓨터가 데이터를 보내기 위해 **계층을 한 단계씩 내려가려면**, 데이터의 **앞 부분**에 **전송에 필요한 정보를 붙여서** 다음 계층으로 보내야 한다.

- 이러한 정보를 **헤더**라고 한다. 여기에는 **데이터를 전달받을 상대방에 대한 정보**도 포함된다.

- 헤더를 하나씩 붙여나가는 것을 **캡슐화**라 하고, 받는 쪽에서 헤더를 하나씩 제거하는 것을 **역캡슐화**라고 한다.

OSI 모델을 기본으로 하되 6, 5계층을 7계층에 합쳐 **5개의 계층으로 인지**한 상태에서, 데이터 전송의 전체 흐름을 본다.

- 송신 측 **응용 계층**에서 요청 데이터를 만들고, 전송 계층에 전달한다.

- **전송 계층**은 신뢰할 수 있는 통신이 이루어지도록, 데이터에 **헤더**를 붙여서 네트워크 계층에 전달한다.

- **네트워크 계층**은 다른 네트워크와의 통신이 가능하도록, 또 **헤더**를 붙여서 데이터 링크 계층에 전달한다.

- **데이터 링크 계층**은 해당 데이터를 물리적인 통신 채널에 연결하기 위해, **헤더**와 **트레일러**를 붙이고 물리 계층에 전달한다.
  
  - **트레일러**는, 데이터 **마지막**에 추가하는 정보이다.

- **물리 계층**에서 데이터는 최종적으로 **전기 신호**로 변환되어, 수신 측에 도착한다.

- 수신 측에서는 **지금까지 붙은 트레일러와 헤더를 계층을 타고 올라가면서 하나씩 제거**한다.

이러한 **프로토콜**을 정확히 준수해야, 데이터가 문제없이 전달될 수 있다.

> ### VPN(Virtual Private Network)
> 
> **가상 통신 터널**을 만들어, 거점 간을 연결해 통신하거나 외부에서 내부 네트워크에 접속하는 것.
> 
> **물리적 거리가 먼 랜 사이**에 통신이 필요할 때 사용한다.
> 
> - 기업의 본사 내부 랜과 지사 내부 랜 사이 연결이 예시가 된다.
> 
> 두 종류가 있다.
> 
> - **인터넷 VPN**은, **일반 인터넷망**을 사용한다.
>   
>   - **거점 간 접속**에서는 IPsec이라는 암호 기술 프로토콜을 사용해 접속한다.
>   
>   - **원격 접속 연결**은 외부에서 사용하는 컴퓨터와 사내 네트워크를 연결하므로, 암호화된 통신로를 만든다.
> 
> - **IP-VPN**은, MPLS라는 기술을 이용해 일반 인터넷망이 아닌 **통신 사업자 전용 폐쇄망**을 사용한다.
>   
>   - 제3자에 의한 해킹이나 데이터 변조 위험이 없어, 암호화 기능이 필요없다.
