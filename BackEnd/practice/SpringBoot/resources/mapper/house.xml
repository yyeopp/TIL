<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.ssafy.happyhouse.model.mapper.HouseMapper">
	
	<select id="searchHouseList" parameterType="String" resultType="HouseList">
		select aptCode,aptName,lat,lng
		from houseinfo
		where dongCode = #{dongCode}
	</select>
	
	<select id="searchHouseDealInfo" parameterType="Integer" resultType="HouseDealInfo">
		select h.aptName, h.dongName ,h.buildYear,h.jibun,d.dealAmount, d.dealYear,d.dealMonth,d.dealDay,d.area,d.floor
		from houseinfo h join housedeal d
		where h.aptCode = #{aptcode}
		and h.aptCode = d.aptCode
		order by dealyear desc,dealMonth desc , dealDay desc
	</select>
	
	<select id="searchHouseListRange" parameterType="String" resultType="HouseList">
		select aptCode,aptName,lat,lng
		from houseinfo
		<if test="swLng != '' and swLng != null and neLng != '' and neLng != null"> 
			WHERE LNG BETWEEN #{swLng} AND #{neLng} </if> 
		<if test="swLat != '' and swLat != null and neLat != '' and neLat != null"> 
			AND LAT BETWEEN #{swLat} AND #{neLat} 
		</if>
	</select>
	
</mapper>