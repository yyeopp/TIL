# 싱글톤 컨테이너

---

## 웹 애플리케이션과 싱글톤

스프링은 대부분 웹 애플리케이션 제작에 사용되는데, 웹 애플리케이션은 일반적으로 **여러 고객이 동시에 요청**을 한다.

- 기존에 만들었던 `AppConfig`, DI 컨테이너에 멀티유저 요청이 들어온다고 할 때, 

- `AppConfig`는 물론 그에 정의된 빈들은 *매 요청마다* 새로 생성되는 상황.

- 트래픽이 높을수록 **메모리 낭비**가 너무 심각해짐

- 이를 해결할 방법이 **싱글톤 패턴**

---

## 싱글톤 패턴

**클래스의 인스턴스가 딱 1개만 생성되는 것을 보장하는 디자인 패턴**이다.

```java
package com.hello.core.singleton;

public class SingletonService {

    private static final SingletonService instance = new SingletonService();

    public static SingletonService getInstance() {
        return instance;
    }

    private SingletonService() { }

    public void logic() {
        System.out.println("싱글톤 객체 로직 호출");
    }
}


```



구현하는 수많은 방법 중, 객체를 미리 생성해두고 사용하는 가장 단순하고 안전한 방법.

- static 영역에, 런타임에 객체 인스턴스를 미리 하나만 생성해서 올려둔다.

- 객체 인스턴스가 필요하면 `getInstance()` 메서드를 통해서만 조회 가능하고, 이 때 항상 같은 인스턴스가 반환된다.

- 해당 객체를 다시 생성하지 않을 수 있도록 생성자를 private으로 막아둔다.

요청이 올 때마다 객체를 생성하지 않고, **이미 만들어진 객체를 공유**해서 효율적으로 사용하게 된다.

### 싱글톤 패턴 문제점

- 패턴 구현을 위한 코드가 필요

- 의존관계 상, 클라이언트가 구체 클래스에 의존하게 된다.
  
  - DIP 위반

- 클라이언트가 구체 클래스에 의존하게 된다.
  
  - OCP 위반

- 테스트가 어렵다.

- 내부 속성 변경 및 초기화가 어렵다.

- 자식 클래스 만들기가 어렵다.

- **유연성**이 떨어진다.

---

## 싱글톤 컨테이너


