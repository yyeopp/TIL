# 빈 스코프

---

## 빈 스코프란?

모든 스프링 빈이 컨테이너 시작과 함께 생성되고 종료될 때 소멸하는 것이 아니다.

그러한 빈은 **싱글톤 스코프**를 가진 빈이고, 그 외에도 다양한 **스코프**가 지원되고 있다.

### 다양한 빈 스코프

#### 싱글톤

기본 스코프로, 스프링 컨테이너의 **시작과 종료까지 유지**되는 가장 넓은 범위의 스코프

#### 프로토타입

스프링 컨테이너가 해당 빈의 **생성과 의존관계 주입까지만 관여**하고 이후에는 관리하지 않는 스코프.

#### 웹 관련 스코프

- **request**: **웹 요청이 들어오고 나갈 때까지** 유지되는 스코프

- **session**: **웹 세션이 생성되고 종료될 때까지** 유지되는 스코프

- **application**: 웹의 **서블릿 컨텍스트와 같은 범위**로 유지되는 스코프

특정 클래스를 Bean으로 등록할 때, `@Scope` 애노테이션을 사용해서 스코프를 지정할 수 있다.

---

## 프로토타입 스코프

싱글톤 스코프의 빈을 조회할 시, 스프링 컨테이너는 **항상 같은 인스턴스**의 스프링 빈을 반환한다.

하지만 해당 빈이 **프로토타입 스코프**인 경우, 스프링 컨테이너는 **항상 새로운 인스턴스를 생성해서 반환**해준다.

- 그리고 반환된 인스턴스는 컨테이너에서 관리하지 않는다.

즉, 프로토타입 빈을 **관리할 책임은 해당 빈을 받은 클라이언트에게 있다**.

- `@PreDestroy` 같은 종료 메서드가 자동으로 호출되지 않기 때문에,

- 혹시 필요하다면 클라이언트가 직접 호출해야 한다.

### 프로토타입 빈 특정 정리

스프링 컨테이너에 **요청할 때마다** 새로 생성된다.

스프링 컨테이너는 프로토타입 빈의 **생성, 의존관계 주입, 초기화**까지만 관여한 뒤 더 이상 관리하지 않는다.

따라서, 스프링 컨테이너 종료 시 **소멸 메서드가 호출되지 않는다.**

---

## 프로토타입 스코프 - 싱글톤 빈과 함께 사용시 문제점


